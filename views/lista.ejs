<%- include('partials/header') %>

    <div class="level">
        <div class="level-left">
            <h1 class="title">Clientes Cadastrados</h1>
        </div>
        <div class="level-right">
            <a href="/cadastro" class="button is-link">
                <span class="icon"><i class="fa-solid fa-user-plus"></i></span>
                <span>Novo Cliente</span>
            </a>
        </div>
    </div>

    <% if (typeof erro !=='undefined' ) { %>
        <div class="notification is-danger">
            <%= erro %>
        </div>
        <% } %>

            <div class="box">
                <table class="table is-fullwidth is-striped is-hoverable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nome</th>
                            <th>CPF</th>
                            <th>Email</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% if(clientes && clientes.length> 0) { %>
                            <% clientes.forEach(function(cliente) { %>
                                <tr>
                                    <td>
                                        <%= cliente.id %>
                                    </td>
                                    <td>
                                        <%= cliente.nome %>
                                    </td>
                                    <td>
                                        <%= cliente.cpf %>
                                    </td>
                                    <td>
                                        <%= cliente.email %>
                                    </td>
                                    <td>
                                        <a href="/editar/<%= cliente.id %>" class="button is-small is-info is-light">
                                            <i class="fa-solid fa-pen"></i>
                                        </a>

                                        <% if(typeof papel !=='undefined' && papel==='ADMIN' ) { %>
                                            <a href="/excluir/<%= cliente.id %>"
                                                class="button is-small is-danger is-light"
                                                onclick="return confirm('Tem certeza que deseja excluir este cliente?')">
                                                <i class="fa-solid fa-trash"></i>
                                            </a>
                                            <% } %>
                                    </td>
                                </tr>
                                <% }); %>
                                    <% } else { %>
                                        <tr>
                                            <td colspan="5" class="has-text-centered">Nenhum cliente encontrado.</td>
                                        </tr>
                                        <% } %>
                    </tbody>
                </table>
            </div>

            <%- include('partials/footer') %>